# CSIBERT WebUI 使用指南

## 🌐 启动 WebUI

### Windows 用户

双击运行 `RUN_WEBUI.bat`，或在命令行中执行：

```bash
RUN_WEBUI.bat
```

### 通用方法

```bash
python webui/app.py
```

启动后，在浏览器中访问：**http://127.0.0.1:7861**

---

## 📋 功能介绍

### 1️⃣ 一键训练

**最简单的训练方式**，适合快速体验：

1. 选择配置方案：
   - **轻量化配置** ⚡：快速体验（5分钟，4GB显存）
   - **标准配置** 🎯：推荐使用（15分钟，8GB显存）
   - **原始配置** 💪：最佳性能（30分钟，16GB显存）

2. 点击 "🚀 开始一键训练"

3. 实时查看训练日志和进度

### 2️⃣ 导入数据训练

**使用已有数据集训练**：

1. 确认数据文件路径：`foundation_model_data/csi_data_massive_mimo.mat`

2. 选择配置方案或自定义参数：
   - 隐藏层大小 (Hidden Size): 128-512
   - Transformer 层数 (Layers): 2-12
   - 注意力头数 (Heads): 2-16
   - 训练轮数 (Epochs): 10-100
   - 批次大小 (Batch Size): 8-64
   - 学习率 (Learning Rate): 1e-5 ~ 1e-3

3. 点击 "🎯 开始训练"

4. 监控训练进度和损失曲线

### 3️⃣ 生成数据

**生成合成 CSI 数据集**（可选功能）：

配置参数：
- 小区数量 (Cells)
- 用户数量 (UEs)
- 子载波数 (Subcarriers)
- 基站天线数 (BS Antennas)
- 用户天线数 (UE Antennas)
- 采样率 (Sample Rate)
- 信噪比 (SNR)
- 移动速度 (Speed)
- 载波频率 (Frequency)

点击 "🔧 生成数据" 创建合成数据集。

### 4️⃣ 进行实验

**评估模型性能**，支持10项实验：

#### 基础实验（5项）

快速验证模型性能：

1. **Reconstruction Error** - 重构误差分析
2. **Prediction Accuracy** - 预测准确度评估（1/3/5/10步）
3. **SNR Robustness** - SNR鲁棒性测试（-10~30dB）
4. **Compression Ratio** - 压缩质量分析（10x~50x）
5. **Inference Speed** - 推理速度测试

#### 高级实验（5项）

深度性能分析：

1. **Masking Ratio Sensitivity** - 掩码比率敏感性（测试15种比率）
2. **Error Distribution** - 误差分布分析（直方图、箱线图、Q-Q图）
3. **Prediction Horizon** - 预测步长分析（1-20步）
4. **Baseline Comparison** - 基线方法对比（零填充、均值填充）
5. **Attention Visualization** - 注意力权重可视化（热力图）

**运行方式**：

1. 选择实验分类：基础实验 / 高级实验 / 全部实验
2. 从下拉菜单选择具体实验
3. 点击 "运行实验" 按钮
4. 查看实验结果和生成的图表

**结果保存位置**：
- 基础验证：`validation_results/`
- 高级实验：`advanced_experiments/`

### 5️⃣ 模型管理

**加载和管理已训练的模型**：

- 自动扫描 `checkpoints/` 目录下的所有模型
- 显示模型配置信息（Hidden/Layers/Heads）
- 支持加载任意已保存的模型
- 点击 "🔄 重新扫描模型" 刷新列表

---

## 💡 使用技巧

### 推荐工作流程

1. **首次使用**：选择"轻量化配置" → 一键训练 → 快速体验（5分钟）

2. **正式训练**：选择"标准配置" → 导入数据训练 → 获得良好性能（15分钟）

3. **性能评估**：运行"All Basic Tests" → 查看基础性能指标

4. **深度分析**：运行高级实验 → 了解模型细节特性

5. **最佳性能**：选择"原始配置" → 长时间训练 → 获得最佳结果（30分钟）

### 配置建议

| 场景 | Hidden | Layers | Heads | Epochs | Batch | 预期时间 | 显存需求 |
|------|--------|--------|-------|--------|-------|----------|----------|
| 快速体验 | 256 | 4 | 4 | 10 | 16 | 5分钟 | 4GB |
| 标准训练 | 256 | 6 | 8 | 30 | 32 | 15分钟 | 8GB |
| 最佳性能 | 512 | 8 | 8 | 50 | 32 | 30分钟 | 16GB |
| 资源受限 | 128 | 2 | 4 | 20 | 8 | 10分钟 | 2GB |

### 常见问题

**Q: 训练时显存不足怎么办？**

A: 
- 降低 Batch Size（如从32降到16或8）
- 降低 Hidden Size（如从512降到256）
- 减少 Transformer 层数

**Q: 如何判断训练效果？**

A: 
- 观察验证损失（Validation Loss）是否下降
- 运行基础实验查看重构误差
- 检查预测准确度指标

**Q: 实验需要多长时间？**

A: 
- 单项基础实验：1-3分钟
- 单项高级实验：3-10分钟
- 全部实验：15-30分钟

**Q: 如何查看实验结果？**

A: 
- WebUI 中直接显示文本结果
- 查看 `validation_results/` 目录的图表和报告
- 查看 `advanced_experiments/` 目录的详细分析

---

## 🎨 界面预览

### 主界面功能区

- **顶部导航**：4个主要功能标签页
- **配置区**：参数设置和方案选择
- **控制区**：启动/停止按钮
- **输出区**：实时日志和结果显示
- **文档区**：使用说明和项目信息

### 实验界面

- **分类选择**：基础实验 / 高级实验 / 全部实验
- **实验选择**：下拉菜单选择具体实验
- **结果展示**：文本日志 + 自动生成图表
- **文件链接**：直接访问生成的报告和图表

---

## 🔗 相关资源

- **命令行训练**：`python train.py --help`
- **基础验证**：`python model_validation.py`
- **高级实验**：`python experiments_extended.py --help`
- **项目文档**：查看 `README.md`

---

## 📞 技术支持

如遇到问题，请检查：

1. Python 版本 ≥ 3.8
2. 所有依赖已安装（`pip install -r requirements.txt`）
3. 数据文件存在（`foundation_model_data/csi_data_massive_mimo.mat`）
4. 显存是否充足
5. Gradio 库已安装（`pip install gradio`）

---

**祝使用愉快！** 🎉
